# BASIC SHELL ALIASES
alias ali='cat ~/.alias'
alias lsd='ls -Gl | grep "^d"'
alias lsort='echo "========== Newest ==========" && ls -At1 && echo "========== Oldest =========="'
alias reload="source ~/.bash_profile && clear"
alias cd..="cd .."
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ......="cd ../../../../.."


# COMPOSER
composerrun() {
  if [[ -d .ddev  ]]; then
    ddev composer "$1"
  else
    composer "$1"
  fi
}

alias cssd="composerrun cssd"
alias cssdb="composerrun cssdb"
alias sync="composerrun sync"


# GIT
alias gita="git add -A"
alias gits="git status"
alias gitrm="git rm --cached -r . -f"
alias gitir="git rm --cached -r . && git add ."

# PACKAGE SCRIPTS
alias build="packagerun build"
alias comp="packagerun component"
alias dev="packagerun dev"
alias prod="packagerun prod"
alias new="packagerun new $1"
alias setup="packagerun setup"
alias start="packagerun start"
alias test="packagerun test"
alias update="packagerun update"
alias watch="packagerun watch"

packagerun() {
  if [[ -f yarn.lock  ]]; then
    yarnrun "$1"
  else
    npmrun "$1"
  fi
}


# NPM
npmrun() {
  if [[ -f .ddev/commands/web/npm ]]; then
    ddev npm run "$1"
  elif [[ -d .ddev  ]]; then
    ddev exec npm run "$1"
  elif [[ -f .nvmrc && -r .nvmrc ]]; then
    nvm use && npm run "$1"
  else
    npm run "$1"
  fi
}

alias nbuild="npmrun build"
alias ncomp="npmrun component"
alias ndev="npmrun dev"
alias nprod="npmrun prod"
alias nnew="npmrun new"
alias nsetup="npmrun setup"
alias nstart="npmrun start"
alias ntest="npmrun test"
alias nupdate="npmrun update"
alias nwatch="npmrun watch"


# YARN
yarnrun() {
  if [[ -f .ddev/commands/web/npm  ]]; then
    ddev yarn "$1"
  elif [[ -d .ddev  ]]; then
    ddev exec yarn "$1"
  elif [[ -f .nvmrc && -r .nvmrc ]]; then
    nvm use && yarn "$1"
  else
    yarn "$1"
  fi
}

alias ybuild="yarnrun build"
alias ycomp="yarnrun component"
alias ydev="yarnrun dev"
alias yprod="yarnrun prod"
alias ynew="yarnrun new"
alias ysetup="yarnrun setup"
alias ystart="yarnrun start"
alias ytest="yarnrun test"
alias yupdate="yarnrun update"
alias ywatch="yarnrun watch"